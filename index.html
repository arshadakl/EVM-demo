<!DOCTYPE html>
<html lang="ml">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vote 4 UDF</title>

    <!-- Malayalam font -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Malayalam:wght@400;600&display=swap"
        rel="stylesheet">

    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            font-size: 16px;
        }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Noto Sans Malayalam', sans-serif;
            background: #eef1f5;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: clamp(8px, 3vw, 24px);
            font-size: clamp(14px, 2vw, 16px);
            overflow-x: hidden;
        }

        .evm-wrapper {
            background: #f8fafc;
            border-radius: clamp(12px, 2vw, 18px);
            box-shadow: 0 8px 20px rgba(15, 23, 42, 0.15);
            max-width: 500px;
            width: 100%;
            padding: clamp(12px, 3vw, 20px);
            border: 1px solid #e2e8f0;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .evm-header {
            text-align: center;
            margin-bottom: clamp(10px, 2vw, 16px);
        }

        .evm-title {
            font-size: clamp(16px, 4vw, 20px);
            font-weight: 700;
            color: #111827;
            margin-bottom: clamp(3px, 1vw, 6px);
            font-family: 'Noto Sans Malayalam', system-ui, sans-serif;
            line-height: 1.3;
        }

        .evm-subtitle {
            font-size: clamp(11px, 2.5vw, 14px);
            color: #374151;
            font-family: 'Noto Sans Malayalam', system-ui, sans-serif;
            line-height: 1.4;
        }

        .evm-rows {
            display: flex;
            flex-direction: column;
            gap: clamp(8px, 1.5vw, 12px);
            margin-top: clamp(6px, 1.5vw, 10px);
        }

        .evm-row {
            display: grid;
            grid-template-columns: 0.7fr 2fr 1fr 0.7fr 1.2fr;
            align-items: center;
            padding: clamp(6px, 1.5vw, 10px);
            border-radius: clamp(8px, 1.5vw, 12px);
            background: #ffffff;
            border: 1px solid #e5e7eb;
            gap: 8px;
        }

        /* Tablet/Laptop adjustments */
        @media (max-width: 768px) {
            .evm-row {
                grid-template-columns: 0.6fr 1.8fr 0.9fr 0.6fr 1.1fr;
                padding: 8px 10px;
            }

            .evm-wrapper {
                max-width: 95%;
            }
        }

        /* Mobile adjustments */
        @media (max-width: 480px) {
            .evm-row {
                grid-template-columns: 0.5fr 1.6fr 0.8fr 0.5fr 1fr;
                padding: 6px 8px;
                gap: 6px;
            }

            body {
                padding: 12px;
            }

            .evm-rows {
                gap: 8px;
            }
        }

        /* Small mobile adjustments */
        @media (max-width: 360px) {
            .evm-row {
                grid-template-columns: 0.5fr 1.5fr 0.7fr 0.5fr 0.9fr;
                padding: 5px 6px;
                gap: 4px;
            }

            .evm-title {
                font-size: 15px;
            }

            .evm-subtitle {
                font-size: 11px;
            }
        }

        /* Very small screens */
        @media (max-width: 320px) {
            .evm-row {
                grid-template-columns: 0.4fr 1.4fr 0.6fr 0.4fr 0.8fr;
                padding: 4px 5px;
            }

            .vote-btn {
                min-width: 50px;
                padding: 4px 8px;
                font-size: 11px;
            }
        }

        .serial {
            font-size: clamp(12px, 2.5vw, 14px);
            font-weight: 600;
            color: #111827;
            text-align: center;
            min-width: 24px;
        }

        .candidate-name {
            font-family: 'Noto Sans Malayalam', system-ui, sans-serif;
            font-size: clamp(12px, 2.5vw, 14px);
            font-weight: 500;
            color: #111827;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            padding-right: 4px;
        }

        .candidate-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 30px;
        }

        .candidate-icon img {
            width: clamp(28px, 6vw, 36px);
            height: clamp(28px, 6vw, 36px);
            border-radius: clamp(4px, 1vw, 6px);
            object-fit: cover;
            border: 1px solid #e5e7eb;
            background: #f9fafb;
        }

        .placeholder {
            border-radius: 6px;
            border: 1px dashed #d1d5db;
            background: #f3f4f6;
            height: clamp(24px, 5vw, 32px);
        }

        .placeholder.name {
            width: 100%;
        }

        .placeholder.icon {
            width: clamp(28px, 6vw, 36px);
            margin: 0 auto;
        }

        .led {
            width: clamp(12px, 3vw, 16px);
            height: clamp(12px, 3vw, 16px);
            border-radius: 999px;
            margin: 0 auto;
            background: #991b1b;
            box-shadow: inset 0 0 3px rgba(0, 0, 0, 0.4);
        }

        .led.off {
            background: #7f1d1d;
            opacity: 0.45;
            box-shadow: none;
        }

        .led.on {
            background: #ef4444;
            box-shadow: 0 0 8px rgba(239, 68, 68, 0.9);
            opacity: 1;
        }

        .led-hidden {
            visibility: hidden;
        }

        @keyframes led-blink {

            0%,
            100% {
                opacity: 0.25;
                box-shadow: none;
            }

            50% {
                opacity: 1;
                box-shadow: 0 0 8px rgba(239, 68, 68, 0.9);
            }
        }

        .blinking {
            animation: led-blink 0.4s linear infinite;
        }

        .vote-btn {
            font-size: clamp(11px, 2.5vw, 13px);
            font-weight: 600;
            padding: clamp(4px, 1vw, 6px) clamp(8px, 1.5vw, 12px);
            border-radius: 999px;
            border: 0;
            background: #2563eb;
            color: white;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: clamp(50px, 8vw, 65px);
            box-shadow: 0 2px 6px rgba(37, 99, 235, 0.55);
            transition: background 0.15s ease, transform 0.1s ease, box-shadow 0.15s ease;
            white-space: nowrap;
        }

        .vote-btn:hover:not(:disabled) {
            background: #1d4ed8;
            transform: translateY(-1px);
            box-shadow: 0 4px 10px rgba(37, 99, 235, 0.7);
        }

        .vote-btn:active:not(:disabled) {
            transform: translateY(0);
            box-shadow: 0 1px 4px rgba(37, 99, 235, 0.4);
        }

        .vote-btn:disabled {
            cursor: not-allowed;
            background: #93c5fd;
            box-shadow: none;
            opacity: 0.85;
        }

        .vote-btn.hidden {
            visibility: hidden;
        }

        /* Error Message */
        .error-container {
            text-align: center;
            padding: 40px 20px;
        }

        .error-title {
            font-size: 24px;
            color: #ef4444;
            margin-bottom: 12px;
            font-weight: 700;
        }

        .error-message {
            font-size: 16px;
            color: #6b7280;
            margin-bottom: 20px;
        }

        .error-links {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .error-link {
            display: inline-block;
            padding: 10px 20px;
            background: #2563eb;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 500;
            transition: background 0.2s ease;
        }

        .error-link:hover {
            background: #1d4ed8;
        }

        /* Modal */
        .modal-backdrop {
            position: fixed;
            inset: 0;
            background: rgba(15, 23, 42, 0.6);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: clamp(12px, 3vw, 24px);
            backdrop-filter: blur(3px);
            overflow: hidden;
        }

        .modal-backdrop.open {
            display: flex;
            animation: backdrop-fade 0.5s ease-out forwards;
        }

        @keyframes backdrop-fade {
            0% {
                backdrop-filter: blur(0px);
            }

            100% {
                backdrop-filter: blur(3px);
            }
        }

        .modal-card {
            width: min(420px, 90vw);
            max-height: 90vh;
            background: linear-gradient(135deg, #f9fafb 0%, #f1f5f9 100%);
            border-radius: clamp(16px, 3vw, 24px);
            padding: clamp(16px, 3vw, 24px);
            position: relative;
            overflow: hidden;
            box-shadow:
                0 20px 50px rgba(15, 23, 42, 0.4),
                0 0 0 1px rgba(255, 255, 255, 0.2) inset;
            border: 1px solid rgba(255, 255, 255, 0.3);
            transform: scale(0.8) translateY(30px);
            opacity: 0;
        }

        /* Shimmer effect overlay */
        .modal-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg,
                    transparent,
                    rgba(255, 255, 255, 0.4),
                    transparent);
            z-index: 1;
            pointer-events: none;
        }

        .modal-backdrop.open .modal-card::before {
            animation: shimmer 1.5s ease-out 0.6s forwards;
        }

        @keyframes shimmer {
            0% {
                left: -100%;
            }

            100% {
                left: 100%;
            }
        }

        /* Light pulse effect */
        .modal-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center,
                    rgba(255, 255, 255, 0.2) 0%,
                    transparent 70%);
            opacity: 0;
            z-index: 0;
        }

        .modal-backdrop.open .modal-card::after {
            animation: light-pulse 1.2s ease-out 0.3s forwards;
        }

        @keyframes light-pulse {
            0% {
                opacity: 0;
                transform: scale(0.8);
            }

            50% {
                opacity: 0.8;
                transform: scale(1.1);
            }

            100% {
                opacity: 0;
                transform: scale(1.3);
            }
        }

        @media (max-width: 480px) {
            .modal-card {
                padding: 16px;
                border-radius: 16px;
            }
        }

        .modal-backdrop.open .modal-card {
            animation: modal-pop 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        @keyframes modal-pop {
            0% {
                transform: scale(0.8) translateY(30px);
                opacity: 0;
            }

            60% {
                transform: scale(1.05) translateY(-5px);
                opacity: 1;
            }

            80% {
                transform: scale(0.98) translateY(0);
            }

            100% {
                transform: scale(1) translateY(0);
                opacity: 1;
            }
        }

        .modal-close {
            position: absolute;
            top: clamp(8px, 1.5vw, 12px);
            right: clamp(8px, 1.5vw, 12px);
            width: clamp(28px, 4vw, 36px);
            height: clamp(28px, 4vw, 36px);
            border-radius: 999px;
            border: none;
            background: linear-gradient(135deg, #ffffff 0%, #f1f5f9 100%);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 2;
            transform: scale(0);
        }

        .modal-backdrop.open .modal-close {
            animation: button-pop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.5s forwards;
        }

        @keyframes button-pop {
            0% {
                transform: scale(0) rotate(-90deg);
            }

            70% {
                transform: scale(1.1) rotate(10deg);
            }

            100% {
                transform: scale(1) rotate(0);
            }
        }

        .modal-close:hover {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
        }

        .modal-close span {
            font-size: clamp(16px, 2.5vw, 20px);
            color: #64748b;
            font-weight: 600;
            transition: color 0.3s ease;
        }

        .modal-close:hover span {
            color: #ef4444;
        }

        /* Success checkmark with enhanced glow */
        .success-check {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%) scale(0);
            width: clamp(40px, 8vw, 50px);
            height: clamp(40px, 8vw, 50px);
            border-radius: 50%;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.4);
            z-index: 1;
            overflow: hidden;
        }

        .success-check::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.4), transparent 70%);
        }

        .success-check::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            box-shadow: 0 0 30px rgba(16, 185, 129, 0.6);
            opacity: 0;
        }

        .modal-backdrop.open .success-check::after {
            animation: check-glow 1.5s ease-out 0.8s forwards;
        }

        @keyframes check-glow {

            0%,
            100% {
                opacity: 0;
                transform: scale(1);
            }

            50% {
                opacity: 1;
                transform: scale(1.3);
            }
        }

        .modal-backdrop.open .success-check {
            animation: check-pop 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.3s forwards;
        }

        @keyframes check-pop {
            0% {
                transform: translateX(-50%) scale(0) rotate(-180deg);
                opacity: 0;
            }

            50% {
                transform: translateX(-50%) scale(1.2) rotate(20deg);
                opacity: 1;
            }

            70% {
                transform: translateX(-50%) scale(0.9) rotate(-10deg);
            }

            100% {
                transform: translateX(-50%) scale(1) rotate(0);
                opacity: 1;
            }
        }

        .success-check-icon::after {
            content: '‚úì';
            font-size: clamp(20px, 4vw, 26px);
            color: white;
            font-weight: bold;
            position: relative;
            z-index: 2;
        }

        /* Title with subtle shine */
        .modal-title {
            text-align: center;
            font-family: 'Noto Sans Malayalam', system-ui, sans-serif;
            font-weight: 700;
            font-size: clamp(18px, 4vw, 24px);
            margin-top: clamp(16px, 3vw, 24px);
            margin-bottom: clamp(6px, 1.5vw, 10px);
            color: #111827;
            background: linear-gradient(135deg, #111827 0%, #374151 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            transform: translateY(20px);
            opacity: 0;
            line-height: 1.3;
            padding: 0 8px;
            position: relative;
            display: inline-block;
        }

        .modal-title::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, #2563eb, transparent);
            opacity: 0;
        }

        .modal-backdrop.open .modal-title::after {
            animation: title-underline 1s ease-out 0.8s forwards;
        }

        @keyframes title-underline {
            0% {
                opacity: 0;
                transform: scaleX(0);
            }

            100% {
                opacity: 0.7;
                transform: scaleX(1);
            }
        }

        .modal-backdrop.open .modal-title {
            animation: text-slide 0.5s ease-out 0.4s forwards;
        }

        @keyframes text-slide {
            0% {
                transform: translateY(20px);
                opacity: 0;
            }

            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-subtitle {
            font-family: 'Noto Sans Malayalam', system-ui, sans-serif;
            font-size: clamp(13px, 3vw, 16px);
            color: #4b5563;
            text-align: center;
            margin-bottom: clamp(12px, 2.5vw, 18px);
            font-weight: 500;
            transform: translateY(20px);
            opacity: 0;
            line-height: 1.4;
            padding: 0 8px;
        }

        .modal-backdrop.open .modal-subtitle {
            animation: text-slide 0.5s ease-out 0.5s forwards;
        }

        /* Poster with enhanced shine */
        .modal-poster {
            width: 100%;
            border-radius: clamp(12px, 2.5vw, 16px);
            overflow: hidden;
            border: 2px solid #e5e7eb;
            margin: clamp(10px, 2vw, 16px) 0;
            background: #e5e7eb;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            position: relative;
            transform: scale(0.9) rotateX(20deg);
            opacity: 0;
            filter: brightness(1.1) contrast(1.1);
        }

        .modal-poster::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 50%;
            height: 100%;
            background: linear-gradient(90deg,
                    transparent,
                    rgba(255, 255, 255, 0.6),
                    transparent);
            z-index: 1;
            pointer-events: none;
        }

        .modal-backdrop.open .modal-poster::before {
            animation: poster-shine 2s ease-out 1.2s forwards;
        }

        @keyframes poster-shine {
            0% {
                left: -100%;
            }

            100% {
                left: 200%;
            }
        }

        .modal-backdrop.open .modal-poster {
            animation: poster-reveal 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.6s forwards;
        }

        @keyframes poster-reveal {
            0% {
                transform: scale(0.9) rotateX(20deg) translateY(30px);
                opacity: 0;
            }

            60% {
                transform: scale(1.05) rotateX(-5deg) translateY(-10px);
                opacity: 1;
            }

            80% {
                transform: scale(0.98) rotateX(2deg) translateY(0);
            }

            100% {
                transform: scale(1) rotateX(0) translateY(0);
                opacity: 1;
            }
        }

        .modal-poster-glow {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(16, 185, 129, 0.1) 100%);
            z-index: 1;
            opacity: 0;
        }

        .modal-backdrop.open .modal-poster-glow {
            animation: poster-glow 2s ease-in-out 1s forwards;
        }

        @keyframes poster-glow {

            0%,
            100% {
                opacity: 0;
            }

            50% {
                opacity: 1;
            }
        }

        .modal-poster img {
            width: 100%;
            display: block;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .modal-poster:hover img {
            transform: scale(1.05);
        }

        /* Footer text with subtle fade-in */
        .modal-footer-text {
            text-align: center;
            font-size: clamp(12px, 2.5vw, 14px);
            color: #374151;
            margin-top: clamp(8px, 2vw, 12px);
            font-family: 'Noto Sans Malayalam', system-ui, sans-serif;
            font-weight: 500;
            transform: translateY(20px);
            opacity: 0;
            line-height: 1.4;
            padding: 0 8px;
        }

        .modal-backdrop.open .modal-footer-text {
            animation: text-slide 0.5s ease-out 0.8s forwards;
        }

        .modal-subtext {
            text-align: center;
            font-size: clamp(10px, 2vw, 12px);
            margin-top: clamp(4px, 1vw, 6px);
            color: #6b7280;
            transform: translateY(20px);
            opacity: 0;
            line-height: 1.4;
            padding: 0 8px;
        }

        .modal-backdrop.open .modal-subtext {
            animation: text-slide 0.5s ease-out 0.9s forwards;
        }

        /* Enhanced Confetti */
        .confetti-container {
            position: absolute;
            inset: 0;
            pointer-events: none;
            overflow: hidden;
            z-index: 50;
        }

        .confetti {
            position: absolute;
            font-size: 20px;
            opacity: 0;
            animation: confetti-fall 2s ease-out forwards;
            pointer-events: none;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100px) rotate(0deg) scale(0);
                opacity: 0;
            }

            15% {
                opacity: 1;
                transform: translateY(0) rotate(180deg) scale(1);
            }

            100% {
                transform: translateY(100vh) rotate(360deg) scale(1);
                opacity: 0;
            }
        }

        /* Subtle alert animation for modal */
        @keyframes alert-pulse {

            0%,
            100% {
                box-shadow:
                    0 20px 50px rgba(15, 23, 42, 0.4),
                    0 0 0 1px rgba(255, 255, 255, 0.2) inset;
            }

            50% {
                box-shadow:
                    0 20px 50px rgba(15, 23, 42, 0.4),
                    0 0 0 1px rgba(255, 255, 255, 0.2) inset,
                    0 0 30px rgba(37, 99, 235, 0.3);
            }
        }

        .modal-backdrop.open .modal-card {
            animation:
                modal-pop 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards,
                alert-pulse 2s ease-in-out 0.8s 2;
        }

        /* Landscape orientation adjustments */
        @media (max-height: 600px) and (orientation: landscape) {
            .modal-card {
                max-height: 85vh;
                overflow-y: auto;
            }

            .modal-poster {
                max-height: 200px;
                overflow: hidden;
            }

            .modal-poster img {
                max-height: 200px;
                object-fit: contain;
            }
        }

        /* Prevent text selection on buttons */
        .vote-btn,
        .modal-close {
            user-select: none;
            -webkit-user-select: none;
        }

        /* Better touch targets for mobile */
        @media (pointer: coarse) {
            .vote-btn {
                min-height: 44px;
                padding: 12px 16px;
            }

            .modal-close {
                min-width: 44px;
                min-height: 44px;
            }
        }

        /* Title container for centering */
        .modal-title-container {
            text-align: center;
        }
    </style>
</head>

<body>
    <div class="evm-wrapper">
        <div class="evm-header">
            <div id="evm-title" class="evm-title">Loading...</div>
            <div id="evm-subtitle" class="evm-subtitle"></div>
        </div>
        <div id="evm-rows" class="evm-rows"></div>
    </div>

    <!-- Modal -->
    <div id="vote-modal" class="modal-backdrop">
        <div class="modal-card">
            <!-- Success checkmark -->
            <div class="success-check">
                <span class="success-check-icon"></span>
            </div>

            <button id="modal-close-btn" class="modal-close" type="button">
                <span>‚úï</span>
            </button>

            <!-- Confetti container -->
            <div class="confetti-container" id="confetti-container"></div>

            <div class="modal-title-container">
                <h2 class="modal-title">‡¥µ‡µã‡¥ü‡µç‡¥ü‡µç ‡¥∞‡µá‡¥ñ‡¥™‡µç‡¥™‡µÜ‡¥ü‡µÅ‡¥§‡µç‡¥§‡¥ø!</h2>
            </div>
            <div id="modal-candidate" class="modal-subtitle"></div>

            <div class="modal-poster">
                <img id="modal-poster-img" src="" alt="Candidate Poster">
                <div class="modal-poster-glow"></div>
            </div>

            <p class="modal-footer-text">
                '‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥µ‡µã‡¥ü‡µç‡¥ü‡µç ‡¥µ‡¥ø‡¥ú‡¥Ø‡¥ï‡¥∞‡¥Æ‡¥æ‡¥Ø‡¥ø ‡¥∞‡µá‡¥ñ‡¥™‡µç‡¥™‡µÜ‡¥ü‡µÅ‡¥§‡µç‡¥§‡¥ø‡¥Ø‡¥ø‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ.'
            </p>
            <p class="modal-subtext">
                <!-- ‡¥°‡µÜ‡¥Æ‡µã ‡¥Æ‡¥æ‡¥§‡µç‡¥∞‡¥Æ‡¥æ‡¥£‡µç ‚Ä¢ ‡¥ï‡µç‡¥≤‡µã‡¥∏‡µç ‡¥ö‡µÜ‡¥Ø‡µç‚Äå‡¥§‡¥æ‡µΩ ‡¥µ‡µÄ‡¥£‡µç‡¥ü‡µÅ‡¥Ç ‡¥µ‡µã‡¥ü‡µç‡¥ü‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡¥æ‡¥Ç. -->
            </p>
        </div>
    </div>

    <!-- Load config file -->
    <script src="config.js"></script>

    <script>
        // DOM Elements
        const evmTitle = document.getElementById('evm-title');
        const evmSubtitle = document.getElementById('evm-subtitle');
        const rowsContainer = document.getElementById('evm-rows');
        const modal = document.getElementById('vote-modal');
        const modalCloseBtn = document.getElementById('modal-close-btn');
        const modalCandidateText = document.getElementById('modal-candidate');
        const modalPosterImg = document.getElementById('modal-poster-img');
        const confettiContainer = document.getElementById('confetti-container');

        const BLINK_DURATION = 3000;
        let activeVoteButton = null;
        let activeLed = null;
        let currentConfig = null;

        // Simple emoji selection for confetti
        const PARTY_EMOJIS = ['üéâ', 'üéä', 'üéà', 'ü•≥'];
        const PARTY_COLORS = ['#ef4444', '#3b82f6', '#10b981', '#f59e0b'];

        /**
         * Get order parameter from URL
         * @returns {number} Order number from URL, defaults to 1
         */
        function getOrderFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            const order = parseInt(urlParams.get('order'), 10);
            return isNaN(order) ? 1 : order;
        }

        /**
         * Initialize the page with configuration
         */
        function initializePage() {
            const order = getOrderFromURL();
            currentConfig = getPageConfig(order);

            if (!currentConfig) {
                showErrorPage(order);
                return;
            }

            // Set page title
            document.title = `Vote 4 UDF - ${currentConfig.title}`;

            // Update header
            evmTitle.textContent = currentConfig.title;
            evmSubtitle.textContent = currentConfig.subtitle;

            // Initialize modal content
            modalCandidateText.textContent = `${currentConfig.candidate.name} ‚Ä¢ ${currentConfig.candidate.party}`;
            modalPosterImg.src = currentConfig.candidate.posterPath;
            modalPosterImg.alt = `${currentConfig.candidate.name} Poster`;

            // Create voting rows
            createRows();

            console.log(`EVM Demo loaded for order=${order}. Click VOTE to see the effect!`);
        }

        /**
         * Show error page when config not found
         * @param {number} order - The requested order number
         */
        function showErrorPage(order) {
            const availableOrders = getAvailableOrders();

            rowsContainer.innerHTML = `
        <div class="error-container">
          <div class="error-title">‚ö†Ô∏è Page Not Found</div>
          <div class="error-message">
            Configuration for order=${order} was not found.<br>
            Please use one of the available pages:
          </div>
          <div class="error-links">
            ${availableOrders.map(o =>
                `<a href="?order=${o}" class="error-link">Order ${o}</a>`
            ).join('')}
          </div>
        </div>
      `;

            evmTitle.textContent = 'Page Not Found';
            evmSubtitle.textContent = '';
        }

        /**
         * Create voting rows based on config
         */
        function createRows() {
            rowsContainer.innerHTML = '';

            for (let i = 1; i <= currentConfig.totalSlots; i++) {
                const row = document.createElement('div');
                row.className = 'evm-row';

                const serial = document.createElement('div');
                serial.className = 'serial';
                serial.textContent = i;

                const nameCell = document.createElement('div');
                const iconCell = document.createElement('div');
                iconCell.className = 'candidate-icon';

                const ledCell = document.createElement('div');
                const buttonCell = document.createElement('div');

                if (i === currentConfig.candidateSlot) {
                    // Active candidate row
                    nameCell.className = 'candidate-name';
                    nameCell.textContent = currentConfig.candidate.name;

                    const img = document.createElement('img');
                    img.src = currentConfig.candidate.iconPath;
                    img.alt = 'Party Icon';
                    iconCell.appendChild(img);

                    const led = document.createElement('div');
                    led.className = 'led off';
                    ledCell.appendChild(led);

                    const btn = document.createElement('button');
                    btn.type = 'button';
                    btn.className = 'vote-btn';
                    btn.textContent = 'VOTE';
                    buttonCell.appendChild(btn);

                    activeLed = led;
                    activeVoteButton = btn;

                    btn.addEventListener('click', handleVoteClick);
                } else {
                    // Empty row visuals
                    nameCell.className = 'placeholder name';

                    const iconPlaceholder = document.createElement('div');
                    iconPlaceholder.className = 'placeholder icon';
                    iconCell.appendChild(iconPlaceholder);

                    const led = document.createElement('div');
                    led.className = 'led led-hidden';
                    ledCell.appendChild(led);

                    const btn = document.createElement('button');
                    btn.type = 'button';
                    btn.className = 'vote-btn hidden';
                    btn.textContent = 'VOTE';
                    btn.disabled = true;
                    buttonCell.appendChild(btn);
                }

                row.appendChild(serial);
                row.appendChild(nameCell);
                row.appendChild(iconCell);
                row.appendChild(ledCell);
                row.appendChild(buttonCell);

                rowsContainer.appendChild(row);
            }
        }

        /**
         * Handle vote button click
         */
        function handleVoteClick() {
            if (!activeVoteButton || !activeLed || !currentConfig) return;

            // Lock button during entire beep + animation
            activeVoteButton.disabled = true;

            // Start LED blinking
            activeLed.classList.remove('off', 'on');
            activeLed.classList.add('blinking');

            // Play beep sound
            playBeepSound();

            // After 3 seconds: stop blinking, LED solid ON, then show popup
            setTimeout(() => {
                activeLed.classList.remove('blinking');
                activeLed.classList.add('on');
                openModal();
            }, BLINK_DURATION);
        }

        /**
         * Play beep sound from config
         */
        function playBeepSound() {
            if (!currentConfig) return;

            try {
                const audio = new Audio(currentConfig.beepSound);
                audio.volume = 0.7;

                const playPromise = audio.play();

                if (playPromise !== undefined) {
                    playPromise.catch(error => {
                        console.log("Audio play attempt failed, continuing without sound:", error);
                    });
                }
            } catch (error) {
                console.log("Could not play audio, continuing without sound:", error);
            }
        }

        /**
         * Create simple confetti effect
         */
        function createSimpleConfetti() {
            // Clear previous confetti
            confettiContainer.innerHTML = '';

            // Create 15 simple confetti pieces
            for (let i = 0; i < 15; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.textContent = PARTY_EMOJIS[Math.floor(Math.random() * PARTY_EMOJIS.length)];
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.animationDelay = `${Math.random() * 0.5}s`;
                confetti.style.color = PARTY_COLORS[Math.floor(Math.random() * PARTY_COLORS.length)];
                confetti.style.fontSize = `${Math.random() * 16 + 20}px`;
                confettiContainer.appendChild(confetti);
            }
        }

        /**
         * Open the success modal
         */
        function openModal() {
            if (!currentConfig) return;

            // Ensure poster image is loaded
            modalPosterImg.src = currentConfig.candidate.posterPath;
            modal.classList.add('open');

            // Create simple confetti effect (once)
            createSimpleConfetti();

            // Add hover effect for the poster
            modalPosterImg.addEventListener('mouseenter', () => {
                modalPosterImg.style.transform = 'scale(1.05)';
            });

            modalPosterImg.addEventListener('mouseleave', () => {
                modalPosterImg.style.transform = 'scale(1)';
            });
        }

        /**
         * Close the success modal
         */
        function closeModal() {
            modal.classList.remove('open');
            // Reset LED
            if (activeLed) {
                activeLed.classList.remove('on');
                activeLed.classList.add('off');
            }
            // Re-enable voting (revote allowed)
            if (activeVoteButton) {
                activeVoteButton.disabled = false;
            }
        }

        // Event listeners
        modalCloseBtn.addEventListener('click', closeModal);

        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModal();
            }
        });

        // Initialize on page load
        initializePage();
    </script>
</body>

</html>